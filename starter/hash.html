<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>history 测试</title>
</head>

<body>

    <p>
        <input type="text" value="0" id="oTxt" />
    </p>
    <p>
        <input type="button" value="+" id="oBtn" />
    </p>
    <a href="file:///C:/Users/Lewis/web/es6/starter/hash.html#100">12</a>
    <script>
        var otxt = document.getElementById("oTxt");
        var oBtn = document.getElementById("oBtn");
        var n = window.location.hash.substring(1);
        document.querySelector('input').value = n
        oBtn.addEventListener("click", function () {
            n++;
            add();
        }, false);
        get();

        function add() {
            if ("onhashchange" in window) {
                window.location.hash = "#" + n;
            }
        }

        function get() {
            if ("onhashchange" in window) {
                window.addEventListener("hashchange", function (e) {
                    var hashVal = window.location.hash.substring(1);
                    if (hashVal) {
                        n = hashVal;
                        otxt.value = n;
                    }
                }, false);
            }
        }
    </script>
</body>

</html>